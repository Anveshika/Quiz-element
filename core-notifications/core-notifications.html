<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="../questions-service/questions-service.html">
<link rel="import" href="../components/paper-button/paper-button.html">
 <link rel="import" href="../components/paper-ripple/paper-ripple.html">
 <link rel="import" href="../components/core-selector/core-selector.html">
 <link rel="import" href="../components/paper-toast/custom-paper-toast.html">
  <link rel="import" href="../components/paper-toast/paper-toast.html">
  <link rel="import" href="../components/paper-shadow/paper-shadow.html">
  <link rel="import" href="status-bar.html">
  <polymer-element name="core-notifications">
  <template>
	<style>    
	.body{
		background: #00FF80;
	}
      :host {
        position: absolute;
        width: 100%;
        height: 100%;
        box-sizing: border-box;
	
      }
	   .item.core-selected {
			background: #00FF80;
			
	  }
	  .item{
			height: 40px;
	line-height: 40px;
padding: 0px 20px;
border-bottom-width: 1px;
border-bottom-style: solid;
border-bottom-color: rgb(204, 204, 204);
}
	 
	  
      #section {
        box-sizing: border-box;
        width: 1000px;
        height: 250px;
        left: 150px;
		 top: 70px;
        position: absolute;
      }
      #div {
        box-sizing: border-box;
        position: relative;
        height: 440px;
        background-color: #A9E2F3;
        padding: 24px;
         font-size: 32px;
      }
       #inline{
	  display: inline;
	  }
	  #paper_fab{
	  margin-left:90%;
	  }
	  #paper_fab1{
	  }
	  #que{
		  height:100px;
	  }
	  #answers{
		 font-size: 32px;
		 background-color:#BCF5A9;
	  }
	  #section {
        box-sizing: border-box;
        position: absolute;
		#fo{
			
		}
      }
paper-toast {
	top: 500px;
	left: 700px;
  	font-size:30px;
	color:green;
}
custom-paper-toast {
  top: 100px;
  left:400px;
 height: 400px;
  width:400px;
  	font-size:30px;
}
#toast123{
	align:center;
	background-color:black;
	color:white;
	font-size:50px;
	}
#toast1{
	background-color:green;
	color:white;
	font-size:30px;
	height:500px;
	width:800px;
	}
#toast2{
	background-color:red;
		color:white;
	font-size:30px;
		height:500px;
	width:800px;
	}
paper-shadow #shadow-top {
border-radius: inherit;
border-top-left-radius: inherit;
border-top-right-radius: inherit;
border-bottom-right-radius: inherit;
border-bottom-left-radius: inherit;
pointer-events: none;
}
html .paper-shadow-top-z-5 {
box-shadow: 0 40px 77px 0 rgba(0, 0, 0, 0.22);
}
	</style>
	 <questions-service id="service" questions="{{questions}}">
	</questions-service>
	<status-bar id="my" class="paper-shadow-top-z-5" score="0" qno="1" qlength={{questions.length}}></status-bar>
	<div id="shadow-top" fit="" class="paper-shadow-top-z-5"></div>
	
    <section id="section" class="paper-shadow-top-z-5" layout vertical>
	<custom-paper-toast id="toast123" color="green" text="Yo" role="status" touch-action="none" tabindex="-1" class="core-transition core-transition-center" style="position: fixed; outline: none; display: none;"><paper-fab icon="arrow-forward" id="paper_fab1" cross-fade-delayed></paper-fab></custom-paper-toast>
	<paper-toast id="toast1" color="red" text="Wrong answer" role="status" touch-action="none" tabindex="-1" class="core-transition core-transition-bottom" style="position: fixed; outline: none; display: none;"></paper-toast>	
	<paper-toast id="toast2" color="red" text="Wrong answer" role="status" touch-action="none" tabindex="-1" class="core-transition core-transition-bottom" style="position: fixed; outline: none; display: none;"></paper-toast>	
			<div id="div" hero>
					<span id="span">Question</span>
					<div id="que">
					
							<blockquote > {{questions[0].question}} </blockquote>
					</div>
		 
					<paper-fab icon="av:play-arrow" id="paper_fab" cross-fade-delayed on-click="{{updateModel}}"></paper-fab>
           </div>
	    
					<section id="section1" hero flex>
						  <div id="answers">
						<span id="span1">Choose Answers</span>
							<br>
							<br>
							<core-selector id="ans"  selectedItem="{{input}}">
									<div class="item">{{questions[0].ch1}}</div>
									
									<div class="item">{{questions[0].ch2}}</div>
									
									<div class="item">{{questions[0].ch3}}</div>
								    
									<div class="item">{{questions[0].ch4}}</div>
							</core-selector>
					</section>
			</div>
    </section>
	  </template>
    <script>
	var i=0;
	var score=0;
	var delay=3000;
    Polymer('core-notifications', {
    created: function() {
      this.questions=[];
       this.current=0;
	   this.chance=0;
    },
    questionsLoaded: function() {
	  	  document.sele.show();
		this.questions = this.$.ajax.response.slice(0);
      console.log("printing questions");
      console.log(this.questions);
    },
    updateModel: function() {
		if(i<this.questions.length) {
			if((this.input.innerHTML==this.questions[0].ans)){
				var audio = new Audio('rightvoice.ogg');
				audio.play();
				if(this.chance==1) {
					score=score+50;
				} 
				else {
					score=score+100;
				}
				this.$.toast1.text="Correct answer. Your score is "+score;
// dynamic change of color	for selector
			//this.$.ans.item.core-selected.background: #00FF80;
				this.$.toast1.show();
				if(i!=this.questions.length-1)
				{
				this.async(function(){				
				this.current = this.current + 1;
				this.questions[0]=this.questions[this.current];
				},null,delay);
				}
				else
				{
					this.$.toast123.text="Your Final score is "+score;
					this.$.toast123.show();
				}
				i++;
				this.chance=0;
			} 
			else {	
				var audio = new Audio('voicebuzzer.ogg');
				audio.play();
					
				this.chance=this.chance+1;
				if(this.chance==2)
				{
					this.$.toast2.text="Wrong Answer. The correct answer is "+this.questions[this.current].ans;
					this.$.toast2.show();
					if(i!=this.questions.length-1)
					{
					this.async(function(){				
					this.current = this.current + 1;
					this.questions[0]=this.questions[this.current];
					},null,delay);
					}
					else
					{
					this.$.toast123.text="Your Final score is "+score;
					this.$.toast123.show();
					}
					this.chance=0;
					i++;
				} 
				else {
						this.$.toast2.show();
					}
}	
		this.$.my.qno=i+1;this.$.my.score=score;
}				
   }  
  });
    </script>
  </polymer-element>